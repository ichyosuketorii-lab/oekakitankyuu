<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚·ãƒ³ãƒ—ãƒ«ãªãŠçµµã‹ãã‚¢ãƒ—ãƒª (HTMLå®Œçµ)</title>

    <style>
        /* CSSã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«è¨˜è¿° */
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px;
            background-color: #f4f4f4;
        }

        h1 {
            color: #333;
        }

        .controls {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        /* æç”»ã‚­ãƒ£ãƒ³ãƒã‚¹ã«æ ç·šã‚’ã¤ã‘ã‚‹ */
        #drawing-board {
            border: 2px solid #333;
            background-color: #fff;
            cursor: crosshair; /* ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã‚’åå­—ã«å¤‰æ›´ */
        }

        button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            font-size: 16px;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <h1>ã‚·ãƒ³ãƒ—ãƒ«ãªãŠçµµã‹ã</h1>

    <div class="controls">
        <label for="color-picker">ğŸ–Šï¸ **è‰²**:</label>
        <input type="color" id="color-picker" value="#000000">

        <label for="line-width">ğŸ“ **å¤ªã•**:</label>
        <input type="range" id="line-width" min="1" max="50" value="5">

        <button id="clear-button">ğŸ—‘ï¸ **å…¨æ¶ˆå»**</button>
    </div>

    <canvas id="drawing-board" width="800" height="600"></canvas>

    <script>
        // JavaScriptã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«è¨˜è¿°
        document.addEventListener('DOMContentLoaded', () => {
            // è¦ç´ ã®å–å¾—
            const canvas = document.getElementById('drawing-board');
            const ctx = canvas.getContext('2d');
            const colorPicker = document.getElementById('color-picker');
            const clearButton = document.getElementById('clear-button');
            const lineWidthInput = document.getElementById('line-width');

            // æç”»çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹å¤‰æ•°
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;

            // åˆæœŸæç”»è¨­å®š
            ctx.lineWidth = lineWidthInput.value;
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.strokeStyle = colorPicker.value;

            // --- æç”»é–¢æ•° ---
            function draw(e) {
                if (!isDrawing) return;

                // æç”»è¨­å®šã®æ›´æ–°
                ctx.strokeStyle = colorPicker.value;
                ctx.lineWidth = lineWidthInput.value;

                // æç”»
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke();

                // æ¬¡ã®æç”»ã®ãŸã‚ã«ç¾åœ¨ã®åº§æ¨™ã‚’è¨˜éŒ²
                [lastX, lastY] = [e.offsetX, e.offsetY];
            }

            // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š ---

            // 1. æç”»é–‹å§‹
            canvas.addEventListener('mousedown', (e) => {
                isDrawing = true;
                [lastX, lastY] = [e.offsetX, e.offsetY];
            });

            // 2. æç”»å®Ÿè¡Œ
            canvas.addEventListener('mousemove', draw);

            // 3. æç”»çµ‚äº†
            canvas.addEventListener('mouseup', () => isDrawing = false);
            canvas.addEventListener('mouseout', () => isDrawing = false);

            // 4. å…¨æ¶ˆå»ãƒœã‚¿ãƒ³
            clearButton.addEventListener('click', () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            });

            // 5. ç·šã®å¤ªã•å¤‰æ›´ (ã¤ã„ã§ã«è¿½åŠ ã—ã¾ã—ãŸ)
            lineWidthInput.addEventListener('input', (e) => {
                ctx.lineWidth = e.target.value;
            });

            // ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã®ã‚µãƒãƒ¼ãƒˆ (ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å¯¾å¿œ)
            canvas.addEventListener('touchstart', (e) => {
                // ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãªã©ï¼‰ã‚’ç„¡åŠ¹åŒ–
                e.preventDefault(); 
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;

                isDrawing = true;
                [lastX, lastY] = [x, y];
            });

            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                if (!isDrawing) return;

                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;

                draw({ offsetX: x, offsetY: y }); // touchmoveã‹ã‚‰drawé–¢æ•°ã‚’å‘¼ã³å‡ºã™
            });

            canvas.addEventListener('touchend', () => isDrawing = false);
        });
    </script>
</body>
</html>
